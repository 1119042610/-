
---

# 🧩 帮我找茬（自动检测辅助工具）

一个基于 **Python + OpenCV + Tkinter** 的桌面自动化辅助工具，
用于识别“大家来找茬”类游戏中左右两幅图像的差异点，并可自动点击。

---

## 📸 功能概述

* 🧠 自动检测左右图片差异
* 🖱️ 自动点击差异位置
* 🎨 可视化结果展示（差异区域红色高亮）
* ⚙️ 可调参数（最小面积阈值、高斯模糊核大小、是否启用自动点击）
* 🪟 窗口始终置顶显示（不会被其他窗口覆盖）
* 🕶️ 检测时自动隐藏窗口，避免被截屏捕捉

---

## 🧰 运行环境

| 模块            | 版本建议      |
| ------------- | --------- |
| Python        | 3.8+      |
| opencv-python | ≥ 4.8     |
| numpy         | ≥ 1.24    |
| pyautogui     | ≥ 0.9     |
| pillow        | ≥ 9.0     |
| pywin32       | ≥ 306     |
| tkinter       | Python 自带 |

安装依赖：

```bash
pip install opencv-python numpy pyautogui pillow pywin32
```

---

## 🚀 使用方法

### 1️⃣ 启动程序

```bash
python play.py
```

启动后将弹出一个名为 **“帮我找茬”** 的控制界面：

* 左侧按钮：🔍 找茬（执行检测）
* 右侧按钮：❌ 退出
* 下方为参数调节与结果显示区域

---

### 2️⃣ 操作步骤

1. 打开 **大家来找茬** 游戏窗口（必须名称为 `"大家来找茬"`）；
2. 运行脚本，保持游戏窗口可见；
3. 点击【🔍 找茬】按钮：

   * 程序会自动隐藏界面，截取屏幕；
   * 分析左右图片差异；
   * 自动点击差异点；
   * 检测结束后重新显示窗口并更新结果图。

---

### 3️⃣ 参数说明

| 参数         | 功能                   | 建议范围     |
| ---------- | -------------------- | -------- |
| **最小面积阈值** | 过滤小噪点（面积小于该值的差异不会标出） | 20–200   |
| **高斯核大小**  | 控制图像模糊程度，越大越平滑       | 1–9      |
| **启用自动点击** | 是否自动点击检测到的差异点        | 可选（默认开启） |

---

## 🧩 界面预览

```
┌───────────────────────────────┐
│       帮我找茬 (置顶窗口)     │
│ ┌──────────┐  ┌──────────┐ │
│ │🔍 找茬   │  │❌ 退出   │ │
│ └──────────┘  └──────────┘ │
│ ┌───────────────────────────┐
│ │参数调节：最小面积、高斯核 │
│ │[✔] 启用自动点击          │
│ └───────────────────────────┘
│        检测结果预览图        │
└───────────────────────────────┘
```

---

## ⚠️ 注意事项

* 程序依赖窗口标题 `"大家来找茬"`，如游戏标题不同，请修改：

  ```python
  window_handle = get_window_handle("大家来找茬")
  ```
* 检测期间窗口会自动隐藏，请勿操作鼠标；
* 建议在 1080p 显示环境下运行，若分辨率不同需调整坐标常量；
* 脚本仅供学习与研究图像处理算法，不得用于违反游戏使用协议的行为。

---

## 🧱 文件结构

```
.
├── play.py         # 主程序
└── README.md       # 使用说明（本文件）
```

---

## 🧠 技术要点

* **OpenCV ECC 图像配准**：自动纠正微小位移；
* **差异图动态阈值检测**；
* **形态学噪声处理**；
* **Tkinter GUI + 多线程安全刷新**；
* **屏幕自动化控制（PyAutoGUI）**；
* **窗口置顶与隐藏（Win32 API）**。

---
**Last Updated:** 2025-10-17
---
